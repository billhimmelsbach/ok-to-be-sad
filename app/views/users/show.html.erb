<%= render :partial => "layouts/flash_messages"%>
<% if current_user != nil && current_user.id == @user.id %>
  <div class="dropdownprofile">
    <div class = "show-mobile">
      <div id ="cog" class="cog glyphicon glyphicon-cog"></div>
    </div>
    <div class="dropdown-content">
      <br>
      <%= link_to "Profile Settings", edit_user_path(current_user) %>
      <br><br>
      <%= link_to "Log Out", logout_path %>
      <br><br>
    </div>
  </div>
<% end %>
<div class="ProfilePhoto">
  <img src="<%= @user.image%>" class="product_img img-responsive img-circle">
</div>
<h2><%= @user.first_name %>
  <%= @user.last_name %>'s Profile Page
</h2>
<h4>Date Joined:
  <%= @user.created_at.localtime.strftime("%B #{@user.created_at.day.ordinalize}, %Y") %>
</h4>
<div class= "show-mobile text-center">
  <i class="fa fa-angle-double-down bounce animated scroll-down fa-5x" aria-hidden="true"></i>
</div>
  <% @articles.each do |article| %>
  <div class="index-container col-xs-12 container-fluid well">
    <div class="col-xs-12" style="padding: 10px">

      <% if @user.articles.distinct.count < 1 || nil %>
        <p>What makes you happy?</p>
        <p><%= link_to "Click here", new_article_path %> to share now!</p>
      <% end %>

      <% if article.content_type == "image" %>
        <div class="text-center"> <img class = "img-responsive" style="max-height:60vh; width:auto;" src="<%= article.content %>"> <h1><%= article.title %></div>
      <% end %>

      <% if article.content_type == "video" %>
        <div class = "embed-container">
          <iframe class="ytplayer" type="text/html"
            src="https://www.youtube.com/embed/<%= youtube_embed(article.content) %>"
            frameborder="0">
          </iframe>
        </div>
      <% end %>

      <% if article.content_type == "song" %>
        <div style= "text-align:center; width:100%; height:80vh;"> <iframe class="vertically-align-force"  src="https://embed.spotify.com/?uri=spotify:track:<%= article.content[-22..-1] %>&view=coverart" width="200" height="380" align="middle" frameborder="0" allowtransparency="true"></iframe></div>
      <% end %>

      <% if article.content_type == "quote" %>
        <div style="height:60vh">
          <div style="height:60vh">
            <p class = "quote-title"><%= article.content %></p>
            <p class = "quote-title">-<%= article.title %></p>
          </div>
        </div>
      <% end %>

      <% if current_user != nil && current_user.id == article.user.id %>
        <div class="buttonrow">
          <%= link_to edit_article_path(article), class: "btn btn-info btn-primary" do %>
            <i class="fa fa-reply fa-3x" aria-hidden="true"></i>
          <% end %>
          <span style="margin-right:30px;"></span>
          <button class="btn btn-info btn-primary" type="button" data-toggle="collapse" data-target="#delete<%= article.id %>" aria-hidden="true"><i class="fa fa-reply fa-3x" aria-hidden="true"></i></button>
        </div>
        <br>
          <div class = "row">
            <div class="collapse" id="delete<%= article.id %>"><a> <br>
              <div class="well col-xs-6 col-xs-offset-3">
                <h5 class="inline"> Are you sure you want to delete your article? </h5>
                <button class="ruby-link btn-danger btn-primary btn-sm inline"><%= link_to "Delete Article", destroy_article_path(article), method: :delete, :class=>"ruby-link"%></button>
                <button class = "btn-success btn-primary btn-sm inline" data-toggle="collapse" data-target="#delete<%= article.id %>" aria-expanded="false" aria-controls="collapseExample">Cancel</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <% end %>
    </div>
  <% end %>
</div>
